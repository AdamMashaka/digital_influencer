{% extends "dashboard/base.html" %}
{% load static %}
{% block content %}
<div class="grid grid-cols-12 gap-x-6">
  <div class="col-span-12 xl:col-span-12">
    <div class="box">
      <div class="box-header lg:flex lg:justify-between">
        <h5 class="box-title my-auto">Course Content</h5>
      </div>
      <div class="box-body">
        <form action="" method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        <div
          class="sm:flex bg-gray-100 hover:bg-gray-200 rounded-sm transition p-1 dark:bg-black/20 dark:hover:bg-black/20">
          <nav class="sm:flex sm:space-x-2 rtl:space-x-reverse overflow-auto">
            <a class="w-full sm:w-auto hs-tab-active:bg-white hs-tab-active:text-gray-700 dark:hs-tab-active:bg-bgdark dark:hs-tab-active:text-white py-2 px-3 inline-flex items-center gap-2 bg-transparent text-sm text-gray-500 font-medium rounded-sm  dark:text-white/50 dark:hover:text-white active"
              href="javascript:void(0);" id="segment-item-1" data-hs-tab="#segment-1">
              Basic
            </a>
            <a class="w-full sm:w-auto hs-tab-active:bg-white hs-tab-active:text-gray-700 dark:hs-tab-active:bg-bgdark dark:hs-tab-active:text-white py-2 px-3 inline-flex items-center gap-2 bg-transparent text-sm text-gray-500 font-medium rounded-sm  dark:text-white/50 dark:hover:text-white"
              href="javascript:void(0);" id="segment-item-2" data-hs-tab="#segment-2">
              Info
            </a>
            <a class="w-full sm:w-auto hs-tab-active:bg-white hs-tab-active:text-gray-700 dark:hs-tab-active:bg-bgdark dark:hs-tab-active:text-white py-2 px-3 inline-flex items-center gap-2 bg-transparent text-sm text-gray-500 font-medium rounded-sm  dark:text-white/50 dark:hover:text-white"
              href="javascript:void(0);" id="segment-item-4" data-hs-tab="#segment-4">
              Pricing
            </a>
            <a class="w-full sm:w-auto hs-tab-active:bg-white hs-tab-active:text-gray-700 dark:hs-tab-active:bg-bgdark dark:hs-tab-active:text-white py-2 px-3 inline-flex items-center gap-2 bg-transparent text-sm text-gray-500 font-medium rounded-sm  dark:text-white/50 dark:hover:text-white"
              href="javascript:void(0);" id="segment-item-5" data-hs-tab="#segment-5">
              Media
            </a>
            <a class="w-full sm:w-auto hs-tab-active:bg-white hs-tab-active:text-gray-700 dark:hs-tab-active:bg-bgdark dark:hs-tab-active:text-white py-2 px-3 inline-flex items-center gap-2 bg-transparent text-sm text-gray-500 font-medium rounded-sm  dark:text-white/50 dark:hover:text-white"
              href="javascript:void(0);" id="segment-item-6" data-hs-tab="#segment-6">
              Seo
            </a>
            <a class="w-full sm:w-auto hs-tab-active:bg-white hs-tab-active:text-gray-700 dark:hs-tab-active:bg-bgdark dark:hs-tab-active:text-white py-2 px-3 inline-flex items-center gap-2 bg-transparent text-sm text-gray-500 font-medium rounded-sm  dark:text-white/50 dark:hover:text-white"
              href="javascript:void(0);" id="segment-item-7" data-hs-tab="#segment-7">
              Finish
            </a>
          </nav>
        </div>

        <div class="mt-3">
          <div id="segment-1" class="" role="tabpanel" aria-labelledby="segment-item-1">
            <div class="flex justify-center w-full">
                <div class="w-full max-w-4xl">
                  <div class="bg-white p-6 rounded-lg shadow-none">

                    <div class="flex justify-center w-full">
                      <div class="w-full md:w-8/12">
                        <div class="mb-3">
                          <label for="name" class="block text-sm font-medium text-gray-700">Bootcamp title</label>
                            <input type="text" name="name" class="px-3 py-2 mt-2 ti-form-input" placeholder="Bootcamp title">
                        </div>
                      </div>
                    </div>

                    <div class="flex justify-center w-full">
                      <div class="w-full md:w-8/12">
                        <div class="mb-3">
                          <label for="name" class="block text-sm font-medium text-gray-700">Short description</label>
                            <textarea name="short_description" class="px-3 py-2 mt-2 ti-form-input" row="3" ></textarea>
                        </div>
                      </div>
                    </div>

                    <div class="flex justify-center w-full">
                      <div class="w-full md:w-8/12">
                        <div class="mb-3">
                          <label for="name" class="block text-sm mb-3 font-medium text-gray-700">Description</label>
                            <textarea name="description" id="editor1" class="px-3 py-2 mt-3 ti-form-input" row="3" ></textarea>
                        </div>
                      </div>
                    </div>

                    <div class="flex justify-center w-full">
                      <div class="w-full md:w-8/12">
                        <div class="mb-6">
                          <label for="Category" class="block text-sm font-medium text-gray-700">Category</label>
                          <select id="Category" name="category"
                            class="px-3 py-2 mt-3 ti-form-input border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-0">
                            <option value="youtube">select</option>
                            {% if categories %}
                                {% for category in categories %}
                                     <option value="{{ category.id }}">{{ category.name }}</option>
                                {% endfor %}
                            {% endif %}
                          </select>
                        </div>
                      </div>
                    </div>
  

                    <div class="flex justify-center w-full">
                      <div class="w-full md:w-8/12">
                        <div class="mb-6">
                          <label for="instructor" class="block text-sm font-medium text-gray-700">Instructor</label>
                          <select id="instructor" name="instructor"
                            class="px-3 py-2 mt-3 ti-form-input border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-0">
                            <option value="youtube">select</option>
                            {% if users %}
                                {% for user in users %}
                                     <option value="{{ user.id }}">{{ user.first_name }} {{ user.last_name }}</option>
                                {% endfor %}
                            {% endif %}
                          </select>
                        </div>
                      </div>
                    </div>
  
                    <div class="flex justify-center w-full">
                      <div class="w-full md:w-8/12">
                        <div class="mb-6">
                          <label for="start_date" class="block text-sm font-medium text-gray-700">Start Date</label>
                          <input type="date" id="start_date" name="start_date"
                            placeholder="start date"
                            class="px-3 py-2 mt-3 ti-form-input border-gray-300 bg-white rounded-0 shadow-none focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
  

          </div>
          <div id="segment-2" class="hidden" role="tabpanel" aria-labelledby="segment-item-2">
            <div class="flex justify-center w-full">
              <div class="w-full max-w-4xl">
                <div class="bg-white p-6 rounded-lg shadow-none">
                  
                    <div class="form-group row mb-3">
                        <label class="col-md-2 col-form-label" for="requirements">Requirements</label>
                        <div class="col-md-10">
                          <div id="requirement_area">
  
                            <div class="flex items-center mt-2">
                              <div class="flex-grow px-3">
                                <input type="text"  name="requirements[]" id="requirements" placeholder="Provide Bootcamp Requirements" class="ti-form-input block w-full px-3 py-2 border border-gray-300 rounded-none  placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                              </div>
                              <div>
                                <button type="button" class="text-white bg-green-500 hover:bg-green-600 focus:ring-4 focus:ring-green-300 font-medium rounded-lg text-sm px-4 py-2" onclick="appendRequirement()">
                                  <i class="ti ti-plus"></i>
                                </button>
                              </div>
                            </div>
                            <div id="blank_requirement_field" style="display: none;">
                              <div class="flex items-center mt-2">
                                <div class="flex-grow px-3">
                                  <input type="text"  name="requirements[]" id="requirements" placeholder="Provide Bootcamp Requirements" class="ti-form-input block w-full px-3 py-2 border border-gray-300 rounded-none  placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                                </div>
                                <div>
                                  <button type="button" class="text-white bg-danger hover:bg-danger focus:ring-4 focus:ring-danger-300 font-medium rounded-lg text-sm px-4 py-2" style="margin-top: 0px;" name="button" onclick="removeRequirement(this)">
                                    <i class="ti ti-minus"></i>
                                  </button>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div class="form-group row mb-3">
                        <label class="col-md-2 col-form-label" for="outcomes">Outcomes</label>
                        <div class="col-md-10">
                          <div id="outcomes_area">
                            <div class="flex items-center mt-2">
                              <div class="flex-grow px-3">
                                <input type="text"  name="outcomes[]" id="outcomes" placeholder="Provide Bootcamp Outcomes" class="ti-form-input block w-full px-3 py-2 border border-gray-300 rounded-none  placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                              </div>
                              <div>
                                <button type="button" class="text-white bg-green-500 hover:bg-green-600 focus:ring-4 focus:ring-green-300 font-medium rounded-lg text-sm px-4 py-2" onclick="appendoutcomes()">
                                  <i class="ti ti-plus"></i>
                                </button>
                              </div>
                            </div>
                            <div id="blank_outcomes_field" style="display: none;">
                              <div class="flex items-center mt-2">
                                <div class="flex-grow px-3">
                                  <input type="text"  name="outcomes[]" id="outcomes" placeholder="Provide Bootcamp Outcomes" class="ti-form-input block w-full px-3 py-2 border border-gray-300 rounded-none  placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                                </div>
                                <div>
                                  <button type="button" class="text-white bg-danger hover:bg-danger focus:ring-4 focus:ring-danger-300 font-medium rounded-lg text-sm px-4 py-2" style="margin-top: 0px;" name="button" onclick="removeoutcomes(this)">
                                    <i class="ti ti-minus"></i>
                                  </button>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                </div>
              </div>
            </div>

          </div>

          <div id="segment-4" class="hidden" role="tabpanel" aria-labelledby="segment-item-4">
            <div class="flex justify-center w-full">
              <div class="w-full max-w-4xl">
                <div class="bg-white p-6 rounded-lg shadow-none">
                  <div class="form-group mb-3">
                    <div class="flex items-center justify-between">
                      <input type="checkbox" id="is_free_course" name="is_free_course" value="1"
                        class="form-checkbox h-5 w-5 text-blue-600" onclick="togglePriceFields(this.id)">
                      <label for="is_free_course" class="ml-2 block text-sm font-medium text-gray-900">Check if this is
                        a free module</label>
                    </div>
                  </div>

                  <div class="paid-course-stuffs">
                    <div class="form-group mb-3">
                      <label for="price" class="block text-sm font-medium text-gray-700">Course price ($)</label>
                      <input type="number" id="price" name="price"
                        class="mt-1 block w-full ti-form-input px-3 py-2 border border-gray-300 rounded-0 shadow-none focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                        min="0" placeholder="Enter course price">
                    </div>

                    <div class="form-group mb-3">
                      <div class="flex items-center justify-between">
                        <input type="checkbox" id="discount_flag" name="discount_flag" value="1"
                          class="form-checkbox h-5 w-5 text-blue-600">
                        <label for="discount_flag" class="ml-2 block text-sm font-medium text-gray-900">Check if this
                            module has discount</label>
                      </div>
                    </div>

                    <div class="form-group mb-3">
                      <label for="discounted_price" class="block text-sm font-medium text-gray-700">Discounted price
                        ($)</label>
                      <input type="number" id="discounted_price" name="discounted_price"
                        class="mt-1 block w-full ti-form-input px-3 py-2 border border-gray-300 rounded-0 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                        min="0" onkeyup="calculateDiscountPercentage()">
                        <input type="hidden" name="discounted_percentage" id="discounted_percentages" class="discounted_percentages">
                      <small class="text-sm text-gray-500">This module has <span id="discounted_percentage"
                          class="text-red-600">0%</span> Discount</small>
                    </div>
                  </div>

                  <hr class="my-4">

                  <div class="form-group mb-3">
                    <label class="block text-sm font-medium text-gray-700">Expiry period</label>
                    <div class="flex items-center">
                      <div class="mr-4">
                        <input type="radio" id="lifetime_expiry_period" name="expiry_period"
                          class="form-radio h-5 w-5 text-blue-600" value="lifetime" onchange="checkExpiryPeriod(this)"
                          >
                        <label for="lifetime_expiry_period"
                          class="ml-2 text-sm font-medium text-gray-900">Lifetime</label>
                      </div>
                      <div>
                        <input type="radio" id="limited_expiry_period" name="expiry_period"
                          class="form-radio h-5 w-5 text-blue-600" value="limited_time"
                          onchange="checkExpiryPeriod(this)">
                        <label for="limited_expiry_period" class="ml-2 text-sm font-medium text-gray-900">Limited
                          time</label>
                      </div>
                    </div>
                  </div>

                  <div class="form-group mb-3 hidden" id="number_of_month">
                    <label for="number_of_months" class="block text-sm font-medium text-gray-700">Number of
                      months</label>
                    <input type="number" id="number_of_months" name="number_of_month"
                      class="mt-1 block w-full ti-form-input px-3 py-2 border border-gray-300 rounded-0 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                      min="1">
                    <small class="badge bg-gray-100 text-gray-500">After purchase, students can access the course until
                      your selected time.</small>
                  </div>

                </div>
              </div>
            </div>

          </div>
          <div id="segment-5" class="hidden" role="tabpanel" aria-labelledby="segment-item-5">
            <div class="flex justify-center w-full">
              <div class="w-full max-w-4xl">
                <div class="bg-white p-6 rounded-lg shadow-none">

                  <div class="flex justify-center w-full">
                    <div class="w-full md:w-8/12">
                      <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700">Bootcamp thumbnail</label>
                        <div class="mt-1 flex flex-col items-start">
                          <div class="w-48 h-48 rounded overflow-hidden bg-gray-100 mb-4">
                            <img id="thumbnailPreview"
                              src="https://demo.creativeitem.com/academy/uploads/thumbnails/course_thumbnails/optimized/course_thumbnail_default-new_121701001881.jpg"
                              alt="Thumbnail" class="w-full h-full object-cover">
                          </div>
                          <button type="button" onclick="document.getElementById('course_thumbnail').click();"
                            class="bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                            Upload a file
                          </button>
                          <input id="course_thumbnail" type="file" name="thumbnail" class="hidden" onchange="previewFile()"
                            accept="image/*">
                        </div>
                      </div>
                    </div>
                  </div>

                </div>
              </div>
            </div>

          </div>
          <div id="segment-6" class="hidden" role="tabpanel" aria-labelledby="segment-item-6">
            <div class="flex justify-center w-full">
              <div class="w-full max-w-4xl">
                <div class="bg-white p-6 rounded-lg shadow-none">
                  <div class="flex justify-center w-full">
                    <div class="w-full max-w-4xl">
                      <!-- Meta Keywords Field -->
                      <div class="mb-3 flex">
                        <label for="meta_keywords"
                          class="w-1/6 text-right pr-3 align-middle pt-2 text-sm font-medium">Meta keywords</label>
                        <div class="w-full">
                          <input type="text" id="meta_keywords" name="meta_keywords"
                            class="ti-form-input tags-input bg-white border border-gray-300 rounded-lg shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 p-2 w-full"
                            placeholder="Write a keyword and then press enter button"
                            >
                        </div>
                      </div>
                      <!-- Meta Description Field -->
                      <div class="mb-3 flex">
                        <label for="meta_description"
                          class="w-1/6 text-right pr-3 align-middle pt-2 text-sm font-medium">Meta description</label>
                        <div class="w-full">
                          <textarea name="meta_description" id="meta_description"
                            class="bg-white ti-form-input  border border-gray-300 rounded-lg shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 p-2 w-full"
                            rows="4"></textarea>
                        </div>
                      </div>
                    </div>
                  </div>

                </div>
              </div>
            </div>
          </div>
          <div id="segment-7" class="hidden" role="tabpanel" aria-labelledby="segment-item-7">
            <div class="flex justify-center w-full">
              <div class="w-full max-w-4xl">
                <div class="bg-white p-6 rounded-lg shadow-none">
                  <div class="flex justify-center w-full">
                    <div class="w-full">
                      <div class="text-center">
                        <h2 class="mt-0"><i class="mdi mdi-check-all"></i></h2>
                        <h3 class="text-3xl mt-0">Thank you!</h3>
                        <p class="w-3/4 mx-auto mb-2">You are just one click away</p>
                        <div class="my-3">
                          <button type="submit"
                            class="px-4 py-2 bg-blue-500 text-white font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out"
                            >Submit</button>
                        </div>
                      </div>
                    </div> <!-- end col -->
                  </div>

                </div>
              </div>
            </div>
          </div>
        </div>
       </form>
      </div>
    </div>
  </div>

</div>

{% endblock content %}
{% block extra_scripts %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
  
    var blank_requirement = jQuery('#blank_requirement_field').html();
    var blank_outcomes = jQuery('#blank_outcomes_field').html();
    jQuery(document).ready(function() {
      jQuery('#blank_outcomes_field').hide();
      jQuery('#blank_requirement_field').hide();
    });
  
    function appendRequirement() {
      jQuery('#requirement_area').append(blank_requirement);
    }
  
    function removeRequirement(requirementElem) {
      jQuery(requirementElem).parent().parent().remove();
    }
  
    function appendoutcomes() {
      jQuery('#outcomes_area').append(blank_outcomes);
    }
  
    function removeoutcomes(outcomesElem) {
      jQuery(outcomesElem).parent().parent().remove();
    }
  
  function previewFile() {
    const file = document.getElementById("course_thumbnail").files[0];
    const reader = new FileReader();
    
    reader.addEventListener("load", function () {
        // Convert image file to base64 string and display it
        document.getElementById("thumbnailPreview").src = reader.result;
    }, false);

    if (file) {
        reader.readAsDataURL(file);
    }
}

  document.addEventListener('DOMContentLoaded', function() {
    // Attach event listeners once the DOM is fully loaded
    document.getElementById('is_free_course').addEventListener('change', togglePriceFields);
    document.getElementById('price').addEventListener('input', calculateDiscountPercentage);
    document.getElementById('discounted_price').addEventListener('input', calculateDiscountPercentage);
    document.querySelectorAll('input[name="expiry_period"]').forEach((elem) => {
        elem.addEventListener('change', checkExpiryPeriod);
    });
});

function calculateDiscountPercentage() {
    var originalPrice = parseFloat(document.getElementById('price').value);
    var discountedPrice = parseFloat(document.getElementById('discounted_price').value);
    if (originalPrice > 0 && discountedPrice > 0 && discountedPrice < originalPrice) {
        var discountPercentage = ((originalPrice - discountedPrice) / originalPrice) * 100;
        document.getElementById('discounted_percentages').value = discountPercentage.toFixed(2) + '%';
        document.getElementById('discounted_percentage').textContent = discountPercentage.toFixed(2) + '%';
    } else {
        document.getElementById('discounted_percentages').value = '0%';
        document.getElementById('discounted_percentage').textContent = '0%';
    }
}

function togglePriceFields() {
    var checkbox = document.getElementById('is_free_course');
    var priceFields = document.querySelector('.paid-course-stuffs');
    priceFields.style.display = checkbox.checked ? 'none' : 'block';
}

function checkExpiryPeriod() {
    var lifetime = document.getElementById('lifetime_expiry_period').checked;
    var number_of_month = document.getElementById('number_of_month');
    number_of_month.style.display = !lifetime ? 'block' : 'none';
}


</script>

{% endblock extra_scripts %}